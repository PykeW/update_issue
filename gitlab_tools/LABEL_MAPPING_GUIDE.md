# GitLab 议题标签映射说明

## 📋 概述

本系统在创建GitLab议题时，会使用项目中现有的标签，不会创建新的标签。所有标签映射都基于项目现有的标签体系。

## 🏷️ 现有标签体系

### 1. 优先级标签（客户需求）

| 严重程度 | 映射标签 | 颜色 | 描述 |
|---------|---------|------|------|
| 1级 | `客户需求::紧急` | 红色 (#dc143c) | 严重问题导致设备硬件损坏；危及人身安全；已引起严重客诉等 |
| 2级 | `客户需求::中等` | 橙色 (#ed9121) | 严重问题导致无法满足功能规格 |
| 3级 | `客户需求::一般` | 绿色 (#009966) | 需优化问题，不影响功能规格，但对交互体验有帮助 |
| 4级 | `客户需求::一般` | 绿色 (#009966) | 需优化问题，不影响功能规格，但对交互体验有帮助 |

### 2. 进度标签

| 数据库状态 | 映射标签 | 颜色 | 描述 |
|-----------|---------|------|------|
| open | `进度::To do` | 灰色 (#e0e0e0) | 待处理的任务，确认了负责人按排期执行 |
| in_progress | `进度::Doing` | 蓝色 (#4169e1) | 正在执行的任务，预计本周内完成 |
| closed | `进度::Done` | 绿色 (#32cd32) | 已完成的任务，且完成研发自测，需要现场测试 |
| resolved | `进度::Done` | 绿色 (#32cd32) | 已完成的任务，且完成研发自测，需要现场测试 |

### 3. 议题类型标签

| 问题描述关键词 | 映射标签 | 颜色 | 描述 |
|---------------|---------|------|------|
| bug, 错误, 故障, 问题, 崩溃, 异常 | `议题类型::Bug` | 浅蓝色 (#91d5ff) | 现场或使用过程中出现的Bug |
| 算法, 模型, 检测, 识别, 分析, 计算, 深度学习, 机器学习, ai, 神经网络 | `议题类型::算法需求` | 紫色 (#9400d3) | 算法相关需求 |
| 新增, 添加, 开发, 实现, 功能, 模块 | `议题类型::新增功能` | 青色 (#36cfc9) | 现场提出的新功能 |
| 优化, 改进, 提升, 性能, 速度, 响应 | `议题类型::功能优化` | 浅绿色 (#b7eb8f) | 任何包含支持功能实现和/或改善用户体验的工作的问题 |
| 其他 | `议题类型::功能优化` | 浅绿色 (#b7eb8f) | 默认为功能优化 |

### 4. 固定标签

| 标签名 | 颜色 | 描述 |
|-------|------|------|
| `议题类型` | 蓝色 (#6699cc) | 标识这是一个议题 |
| `跟踪` | 灰色 | 标识需要跟踪处理 |

## 🔄 标签映射流程

### 1. 严重程度映射
```
数据库严重程度 → 客户需求标签
1级 → 客户需求::紧急
2级 → 客户需求::中等
3-4级 → 客户需求::一般
```

### 2. 状态映射
```
数据库状态 → 进度标签
open → 进度::To do
in_progress → 进度::Doing
closed/resolved → 进度::Done
```

### 3. 议题类型映射
```
问题描述关键词分析 → 议题类型标签
包含bug关键词 → 议题类型::Bug
包含算法关键词 → 议题类型::算法需求
包含新增功能关键词 → 议题类型::新增功能
包含优化关键词 → 议题类型::功能优化
其他 → 议题类型::功能优化 (默认)
```

### 4. 固定标签添加
```
每个议题都会添加：
- 跟踪
```

## 📊 完整标签示例

### 示例1：Bug类型议题
- **严重程度**: 1级
- **状态**: open
- **问题描述**: "界面出现bug导致程序崩溃"
- **生成标签**: `客户需求::紧急`, `议题类型::Bug`, `跟踪`, `进度::To do`

### 示例2：功能优化议题
- **严重程度**: 2级
- **状态**: in_progress
- **问题描述**: "优化界面响应速度"
- **生成标签**: `客户需求::中等`, `议题类型::功能优化`, `跟踪`, `进度::Doing`

### 示例3：新增功能议题
- **严重程度**: 3级
- **状态**: open
- **问题描述**: "新增数据导出功能模块"
- **生成标签**: `客户需求::一般`, `议题类型::新增功能`, `跟踪`, `进度::To do`

### 示例4：算法需求议题
- **严重程度**: 2级
- **状态**: open
- **问题描述**: "优化深度学习模型检测算法"
- **生成标签**: `客户需求::中等`, `议题类型::算法需求`, `跟踪`, `进度::To do`

## ⚙️ 配置说明

标签映射配置位于 `wps_gitlab_config.json` 文件中：

```json
{
  "labels": {
    "severity_mapping": {
      "1": ["客户需求::紧急"],
      "2": ["客户需求::中等"],
      "3": ["客户需求::一般"],
      "4": ["客户需求::一般"]
    },
    "progress_mapping": {
      "open": "进度::To do",
      "in_progress": "进度::Doing",
      "closed": "进度::Done",
      "resolved": "进度::Done"
    },
    "additional_labels": [
      "议题类型",
      "跟踪"
    ],
    "label_mapping": {
      "bug_keywords": ["bug", "错误", "故障", "问题"],
      "enhancement_keywords": ["优化", "改进", "功能", "需求"]
    }
  }
}
```

## 🚫 不创建新标签

系统严格遵循以下原则：
1. **只使用现有标签**：所有标签都必须是项目中已存在的
2. **不创建新标签**：不会在GitLab中创建任何新的标签
3. **标签验证**：创建议题前会验证标签是否存在
4. **映射失败处理**：如果映射的标签不存在，会使用默认标签

## 🔧 维护说明

1. **添加新标签**：如需添加新标签，请先在GitLab项目中手动创建
2. **修改映射**：修改 `wps_gitlab_config.json` 中的映射配置
3. **测试验证**：使用测试脚本验证标签映射是否正确
4. **标签清理**：定期清理不再使用的标签

## 📝 注意事项

1. 确保所有映射的标签在GitLab项目中存在
2. 标签名称必须完全匹配（区分大小写）
3. 如果标签不存在，系统会使用默认标签
4. 建议定期检查标签使用情况，避免标签冗余
